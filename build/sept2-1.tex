\documentclass[a4paper,twoside,12pt]{article} %TESTING 
\usepackage[hmargin={12mm,55mm},vmargin=10mm,footskip=7mm,asymmetric]{geometry}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{tikz}
\usepackage{xcolor}
\usepackage{comment}
\usepackage{adjustbox}
\usepackage{iftex}
\ifPDFTeX
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\else
\usepackage[no-math]{fontspec}
\fi
\usepackage{libertine}

\makeatletter
\let\_\relax
\DeclareRobustCommand{\_}{%
  \leavevmode\vbox{%
    \hrule\@width.4em
          \@height-.16ex
          \@depth\dimexpr.16ex+.28pt\relax}}
\makeatother

\newcommand\Tstrut{\rule{0pt}{2.4ex}}
\newcommand\Bstrut{\rule[-1.1ex]{0pt}{0pt}}

\tikzset{
   tableaulabel/.style={draw=black!30, fill=gray!4, inner sep = 0.5mm, outer sep = 3mm, circle},
   tableau/.style={draw=black!30, fill=gray!4, inner sep = 3mm, outer sep = 3mm, rounded corners=3mm, align=center},
}

\definecolor{greycolour}{rgb}{0.6, 0.6, 0.6}
\newcommand\grey[1]{{\color{greycolour}{#1}}}

\setlength\marginparwidth{45mm}

\newenvironment{fit}{\begin{adjustbox}{max width=\textwidth,max totalheight=\textheight,keepaspectratio}}{\end{adjustbox}}


\ifdefined\showsteps
  \includecomment{steps}
\else
  \excludecomment{steps}
\fi

\raggedbottom

\begin{document}

{\begin{center} \large \textbf{Prove that $A \subseteq f^{-1}(f(A))$}\end{center}}\nopagebreak[4]

\begin{center}
\begin{minipage}{120mm}
Let $x$ be an element of $A$. We would like to show that $x\in f^{-1}(f(A))$, i.e. that $f(x)\in f(A)$. But this is clearly the case, so we are done.
\end{minipage}
\end{center}

\bigskip
\begin{steps}
\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
\\

\begin{tabular}{ll}%

\Bstrut\\\hline\Tstrut
\textbf{\boldmath T1.\ $\textrm{$A\subset f^{-1}(f(A))$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent1. Expand pre-universal target T1.\nopagebreak[4] 
\marginpar{}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
\\

\begin{tabular}{ll}%

\Bstrut\\\hline\Tstrut
\textbf{\boldmath T2.\ $\forall x.(\textrm{$x\in A$}\Rightarrow \textrm{$x\in f^{-1}(f(A))$})$\unboldmath }&\textbf{\boldmath \unboldmath }
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent2. Apply `let' trick and move premise of universal-conditional target T2 above the line.\nopagebreak[4] 
\marginpar{Let $x$ be an element of $A$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$x\in A$}$&
\Bstrut\\\hline\Tstrut
\textbf{\boldmath T3.\ $\textrm{$x\in f^{-1}(f(A))$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent3. Quantifier-free expansion of target T3.\nopagebreak[4] 
\marginpar{We would like to show that $x\in f^{-1}(f(A))$, i.e. that $f(x)\in f(A)$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\\

\begin{tabular}{ll}%
\textbf{\boldmath H1.\ $\textrm{$x\in A$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\Bstrut\\\hline\Tstrut
\textbf{\boldmath T4.\ $\textrm{$f(x)\in f(A)$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent4. All conjuncts of T4 (after expansion) can be simultaneously matched against H1 or rendered trivial by choosing $y = x$, so L1 is done.\nopagebreak[4] 
\marginpar{We would like to show that $f(x)\in f(A)$. But this is clearly the case, so we are done.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}%
\node[tableau] (main) {%
\ \ \,Done
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}

Problem solved.
\cleardoublepage

\end{steps}
{\begin{center} \large \textbf{If g,f are surjections then (g o f) is a surjection.}\end{center}}\nopagebreak[4]

\begin{center}
\begin{minipage}{120mm}
Let $y$ be an element of $C$. Then, since $g$ from $B$ to $C$ is a surjection, we have that $y\in g(B)$. That is, there exists $z\in B$ such that $g(z) = y$. Since $f$ from $A$ to $B$ is a surjection and $z\in B$, we have that $z\in f(A)$. That is, there exists $u\in A$ such that $f(u) = z$. We would like to find $v\in A$ s.t. $g(f(v)) = y$.
\end{minipage}
\end{center}

\bigskip
\begin{steps}
\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ from $A$ to $B$ is a surjection}$&\\
H2.\ $\textrm{$g$ from $B$ to $C$ is a surjection}$&
\Bstrut\\\hline\Tstrut
\textbf{\boldmath T1.\ $\textrm{$g\circ f$ from $A$ to $C$ is a surjection}$\unboldmath }&\textbf{\boldmath \unboldmath }
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent1. Expand pre-universal target T1.\nopagebreak[4] 
\marginpar{}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ from $A$ to $B$ is a surjection}$&\\
H2.\ $\textrm{$g$ from $B$ to $C$ is a surjection}$&
\Bstrut\\\hline\Tstrut
\textbf{\boldmath T2.\ $\forall y.(\textrm{$y\in C$}\Rightarrow \textrm{$y\in g\circ f(A)$})$\unboldmath }&\textbf{\boldmath \unboldmath }
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent2. Apply `let' trick and move premise of universal-conditional target T2 above the line.\nopagebreak[4] 
\marginpar{Let $y$ be an element of $C$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$y$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ from $A$ to $B$ is a surjection}$&\\
\textbf{\boldmath H2.\ $\textrm{$g$ from $B$ to $C$ is a surjection}$\unboldmath }&\textbf{\boldmath \unboldmath }\\
\textbf{\boldmath H3.\ $\textrm{$y\in C$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\Bstrut\\\hline\Tstrut
T3.\ $\textrm{$y\in g\circ f(A)$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent3. Forwards reasoning using H2 with H3.\nopagebreak[4] 
\marginpar{Since $g$ from $B$ to $C$ is a surjection and $y\in C$, we have that $y\in g(B)$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$y$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ from $A$ to $B$ is a surjection}$&\\
H2.\ $\textrm{$g$ from $B$ to $C$ is a surjection}$&[Vuln.; Used with H3.]\\
H3.\ $\textrm{$y\in C$}$&[Vuln.]\\
H4.\ $\textrm{$y\in g(B)$}$&
\Bstrut\\\hline\Tstrut
T3.\ $\textrm{$y\in g\circ f(A)$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent4. Deleted H3, as this unexpandable atomic statement is unmatchable.\nopagebreak[4] 
\marginpar{}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$y$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ from $A$ to $B$ is a surjection}$&\\
H2.\ $\textrm{$g$ from $B$ to $C$ is a surjection}$&[Vuln.; Used with H3.]\\
\grey{H3.\ $\textrm{$y\in C$}$}&\grey{[Vuln.]}\\
H4.\ $\textrm{$y\in g(B)$}$&
\Bstrut\\\hline\Tstrut
T3.\ $\textrm{$y\in g\circ f(A)$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent5. Delete H2 as no other statement mentions $C$.\nopagebreak[4] 
\marginpar{}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$y$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ from $A$ to $B$ is a surjection}$&\\
\grey{H2.\ $\textrm{$g$ from $B$ to $C$ is a surjection}$}&\grey{[Vuln.; Used with H3.]}\\
\grey{H3.\ $\textrm{$y\in C$}$}&\grey{[Vuln.]}\\
\textbf{\boldmath H4.\ $\textrm{$y\in g(B)$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\Bstrut\\\hline\Tstrut
T3.\ $\textrm{$y\in g\circ f(A)$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent6. Expand pre-existential hypothesis H4.\nopagebreak[4] 
\marginpar{By definition, since $y\in g(B)$, there exists $z\in B$ such that $g(z) = y$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$y$\hspace{1.5mm}$z$\\

\begin{tabular}{ll}%
\textbf{\boldmath H1.\ $\textrm{$f$ from $A$ to $B$ is a surjection}$\unboldmath }&\textbf{\boldmath \unboldmath }\\
\grey{H2.\ $\textrm{$g$ from $B$ to $C$ is a surjection}$}&\grey{[Vuln.; Used with H3.]}\\
\grey{H3.\ $\textrm{$y\in C$}$}&\grey{[Vuln.]}\\
\textbf{\boldmath H5.\ $\textrm{$z\in B$}$\unboldmath }&\textbf{\boldmath \unboldmath }\\
H6.\ $\textrm{$g(z) = y$}$&
\Bstrut\\\hline\Tstrut
T3.\ $\textrm{$y\in g\circ f(A)$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent7. Forwards reasoning using H1 with H5.\nopagebreak[4] 
\marginpar{Since $f$ from $A$ to $B$ is a surjection and $z\in B$, we have that $z\in f(A)$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$y$\hspace{1.5mm}$z$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ from $A$ to $B$ is a surjection}$&[Vuln.; Used with H5.]\\
\grey{H2.\ $\textrm{$g$ from $B$ to $C$ is a surjection}$}&\grey{[Vuln.; Used with H3.]}\\
\grey{H3.\ $\textrm{$y\in C$}$}&\grey{[Vuln.]}\\
H5.\ $\textrm{$z\in B$}$&[Vuln.]\\
H6.\ $\textrm{$g(z) = y$}$&\\
H7.\ $\textrm{$z\in f(A)$}$&
\Bstrut\\\hline\Tstrut
T3.\ $\textrm{$y\in g\circ f(A)$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent8. Deleted H5, as this unexpandable atomic statement is unmatchable.\nopagebreak[4] 
\marginpar{}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$y$\hspace{1.5mm}$z$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ from $A$ to $B$ is a surjection}$&[Vuln.; Used with H5.]\\
\grey{H2.\ $\textrm{$g$ from $B$ to $C$ is a surjection}$}&\grey{[Vuln.; Used with H3.]}\\
\grey{H3.\ $\textrm{$y\in C$}$}&\grey{[Vuln.]}\\
\grey{H5.\ $\textrm{$z\in B$}$}&\grey{[Vuln.]}\\
H6.\ $\textrm{$g(z) = y$}$&\\
H7.\ $\textrm{$z\in f(A)$}$&
\Bstrut\\\hline\Tstrut
T3.\ $\textrm{$y\in g\circ f(A)$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent9. Delete H1 as no other statement mentions $B$.\nopagebreak[4] 
\marginpar{}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$y$\hspace{1.5mm}$z$\\

\begin{tabular}{ll}%
\grey{H1.\ $\textrm{$f$ from $A$ to $B$ is a surjection}$}&\grey{[Vuln.; Used with H5.]}\\
\grey{H2.\ $\textrm{$g$ from $B$ to $C$ is a surjection}$}&\grey{[Vuln.; Used with H3.]}\\
\grey{H3.\ $\textrm{$y\in C$}$}&\grey{[Vuln.]}\\
\grey{H5.\ $\textrm{$z\in B$}$}&\grey{[Vuln.]}\\
H6.\ $\textrm{$g(z) = y$}$&\\
\textbf{\boldmath H7.\ $\textrm{$z\in f(A)$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\Bstrut\\\hline\Tstrut
T3.\ $\textrm{$y\in g\circ f(A)$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent10. Expand pre-existential hypothesis H7.\nopagebreak[4] 
\marginpar{By definition, since $z\in f(A)$, there exists $u\in A$ such that $f(u) = z$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$y$\hspace{1.5mm}$z$\hspace{1.5mm}$u$\\

\begin{tabular}{ll}%
\grey{H1.\ $\textrm{$f$ from $A$ to $B$ is a surjection}$}&\grey{[Vuln.; Used with H5.]}\\
\grey{H2.\ $\textrm{$g$ from $B$ to $C$ is a surjection}$}&\grey{[Vuln.; Used with H3.]}\\
\grey{H3.\ $\textrm{$y\in C$}$}&\grey{[Vuln.]}\\
\grey{H5.\ $\textrm{$z\in B$}$}&\grey{[Vuln.]}\\
H6.\ $\textrm{$g(z) = y$}$&\\
H8.\ $\textrm{$u\in A$}$&\\
H9.\ $\textrm{$f(u) = z$}$&
\Bstrut\\\hline\Tstrut
\textbf{\boldmath T3.\ $\textrm{$y\in g\circ f(A)$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent11. Expand pre-existential target T3.\nopagebreak[4] 
\marginpar{We would like to find $v\in A$ s.t. $g(f(v)) = y$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$y$\hspace{1.5mm}$z$\hspace{1.5mm}$u$\\

\begin{tabular}{ll}%
\grey{H1.\ $\textrm{$f$ from $A$ to $B$ is a surjection}$}&\grey{[Vuln.; Used with H5.]}\\
\grey{H2.\ $\textrm{$g$ from $B$ to $C$ is a surjection}$}&\grey{[Vuln.; Used with H3.]}\\
\grey{H3.\ $\textrm{$y\in C$}$}&\grey{[Vuln.]}\\
\grey{H5.\ $\textrm{$z\in B$}$}&\grey{[Vuln.]}\\
H6.\ $\textrm{$g(z) = y$}$&\\
H8.\ $\textrm{$u\in A$}$&\\
H9.\ $\textrm{$f(u) = z$}$&
\Bstrut\\\hline\Tstrut
\textbf{\boldmath T4.\ $\exists v.(\textrm{$v\in A$}\wedge \textrm{$g(f(v)) = y$})$\unboldmath }&\textbf{\boldmath \unboldmath }
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent12. Unlock existential target T4.\nopagebreak[4] 
\marginpar{We would like to find $v\in A$ s.t. $g(f(v)) = y$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$y$\hspace{1.5mm}$z$\hspace{1.5mm}$u$\\

\begin{tabular}{ll}%
\grey{H1.\ $\textrm{$f$ from $A$ to $B$ is a surjection}$}&\grey{[Vuln.; Used with H5.]}\\
\grey{H2.\ $\textrm{$g$ from $B$ to $C$ is a surjection}$}&\grey{[Vuln.; Used with H3.]}\\
\grey{H3.\ $\textrm{$y\in C$}$}&\grey{[Vuln.]}\\
\grey{H5.\ $\textrm{$z\in B$}$}&\grey{[Vuln.]}\\
H6.\ $\textrm{$g(z) = y$}$&\\
H8.\ $\textrm{$u\in A$}$&\\
H9.\ $\textrm{$f(u) = z$}$&
\Bstrut\\\hline\Tstrut
\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$v^\blacklozenge $\\

\begin{tabular}{ll}%

\Bstrut\\\hline\Tstrut
T5.\ $\textrm{$v^\blacklozenge \in A$}$&\\
T6.\ $\textrm{$g(f(v^\blacklozenge )) = y$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L2$^\blacklozenge$};
\end{tikzpicture}%

\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}

No moves possible.
\cleardoublepage

\end{steps}
{\begin{center} \large \textbf{If $f$ is a surjection then $f(A)^c \subset f(A^c)$}\end{center}}\nopagebreak[4]

\begin{center}
\begin{minipage}{120mm}
Let $x$ be an element of $f(A)^c$. Then $x\notin f(A)$. Then it is not that case that $x\in f(A)$. We would like to find $y\in A^c$ s.t. $f(y) = x$. But $y\in A^c$ if and only if $y\notin A$. But $y\notin A$ if and only if it is not that case that $y\in A$.
\end{minipage}
\end{center}

\bigskip
\begin{steps}
\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ from $A$ to $C$ is a surjection}$&
\Bstrut\\\hline\Tstrut
\textbf{\boldmath T1.\ $\textrm{$f(A)^c\subset f(A^c)$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent1. Expand pre-universal target T1.\nopagebreak[4] 
\marginpar{}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ from $A$ to $C$ is a surjection}$&
\Bstrut\\\hline\Tstrut
\textbf{\boldmath T2.\ $\forall x.(\textrm{$x\in f(A)^c$}\Rightarrow \textrm{$x\in f(A^c)$})$\unboldmath }&\textbf{\boldmath \unboldmath }
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent2. Apply `let' trick and move premise of universal-conditional target T2 above the line.\nopagebreak[4] 
\marginpar{Let $x$ be an element of $f(A)^c$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ from $A$ to $C$ is a surjection}$&\\
\textbf{\boldmath H2.\ $\textrm{$x\in f(A)^c$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\Bstrut\\\hline\Tstrut
T3.\ $\textrm{$x\in f(A^c)$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent3. Quantifier-free expansion of hypothesis H2.\nopagebreak[4] 
\marginpar{Since $x\in f(A)^c$, we have that $x\notin f(A)$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ from $A$ to $C$ is a surjection}$&\\
\textbf{\boldmath H3.\ $\textrm{$x\notin f(A)$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\Bstrut\\\hline\Tstrut
T3.\ $\textrm{$x\in f(A^c)$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent4. Quantifier-free expansion of hypothesis H3.\nopagebreak[4] 
\marginpar{Since $x\notin f(A)$, it is not that case that $x\in f(A)$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ from $A$ to $C$ is a surjection}$&\\
H4.\ $\neg \textrm{$x\in f(A)$}$&
\Bstrut\\\hline\Tstrut
\textbf{\boldmath T3.\ $\textrm{$x\in f(A^c)$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent5. Expand pre-existential target T3.\nopagebreak[4] 
\marginpar{We would like to find $y\in A^c$ s.t. $f(y) = x$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ from $A$ to $C$ is a surjection}$&\\
H4.\ $\neg \textrm{$x\in f(A)$}$&
\Bstrut\\\hline\Tstrut
\textbf{\boldmath T4.\ $\exists y.(\textrm{$y\in A^c$}\wedge \textrm{$f(y) = x$})$\unboldmath }&\textbf{\boldmath \unboldmath }
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent6. Unlock existential target T4.\nopagebreak[4] 
\marginpar{We would like to find $y\in A^c$ s.t. $f(y) = x$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ from $A$ to $C$ is a surjection}$&\\
H4.\ $\neg \textrm{$x\in f(A)$}$&
\Bstrut\\\hline\Tstrut
\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$y^\blacklozenge $\\

\begin{tabular}{ll}%

\Bstrut\\\hline\Tstrut
\textbf{\boldmath T5.\ $\textrm{$y^\blacklozenge \in A^c$}$\unboldmath }&\textbf{\boldmath \unboldmath }\\
T6.\ $\textrm{$f(y^\blacklozenge ) = x$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L2$^\blacklozenge$};
\end{tikzpicture}%

\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent7. Quantifier-free expansion of target T5.\nopagebreak[4] 
\marginpar{But $y\in A^c$ if and only if $y\notin A$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ from $A$ to $C$ is a surjection}$&\\
H4.\ $\neg \textrm{$x\in f(A)$}$&
\Bstrut\\\hline\Tstrut
\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$y^\blacklozenge $\\

\begin{tabular}{ll}%

\Bstrut\\\hline\Tstrut
\textbf{\boldmath T7.\ $\textrm{$y^\blacklozenge \notin A$}$\unboldmath }&\textbf{\boldmath \unboldmath }\\
T6.\ $\textrm{$f(y^\blacklozenge ) = x$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L2$^\blacklozenge$};
\end{tikzpicture}%

\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent8. Quantifier-free expansion of target T7.\nopagebreak[4] 
\marginpar{But $y\notin A$ if and only if it is not that case that $y\in A$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ from $A$ to $C$ is a surjection}$&\\
H4.\ $\neg \textrm{$x\in f(A)$}$&
\Bstrut\\\hline\Tstrut
\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$y^\blacklozenge $\\

\begin{tabular}{ll}%

\Bstrut\\\hline\Tstrut
T8.\ $\neg \textrm{$y^\blacklozenge \in A$}$&\\
T6.\ $\textrm{$f(y^\blacklozenge ) = x$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L2$^\blacklozenge$};
\end{tikzpicture}%

\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}

No moves possible.
\cleardoublepage

\end{steps}
{\begin{center} \large \textbf{If $f$ is an injection then $f(A)\cap f(B)\subset f(A\cap B)$}\end{center}}\nopagebreak[4]

\begin{center}
\begin{minipage}{120mm}
Let $x$ be an element of $f(A)\cap f(B)$. Then $x\in f(A)$ and $x\in f(B)$. That is, there exists $y\in A$ such that $f(y) = x$ and there exists $z\in B$ such that $f(z) = x$. Since $f$ is an injection, $f(y) = x$ and $f(z) = x$, we have that $y = z$. We would like to find $u\in A\cap B$ s.t. $f(u) = x$. But $u\in A\cap B$ if and only if $u\in A$ and $u\in B$. Since $y = z$, we have that $y\in B$. Therefore, setting $u = y$, we are done.
\end{minipage}
\end{center}

\bigskip
\begin{steps}
\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ is an injection}$&
\Bstrut\\\hline\Tstrut
\textbf{\boldmath T1.\ $\textrm{$f(A)\cap f(B)\subset f(A\cap B)$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent1. Expand pre-universal target T1.\nopagebreak[4] 
\marginpar{}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ is an injection}$&
\Bstrut\\\hline\Tstrut
\textbf{\boldmath T2.\ $\forall x.(\textrm{$x\in f(A)\cap f(B)$}\Rightarrow \textrm{$x\in f(A\cap B)$})$\unboldmath }&\textbf{\boldmath \unboldmath }
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent2. Apply `let' trick and move premise of universal-conditional target T2 above the line.\nopagebreak[4] 
\marginpar{Let $x$ be an element of $f(A)\cap f(B)$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ is an injection}$&\\
\textbf{\boldmath H2.\ $\textrm{$x\in f(A)\cap f(B)$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\Bstrut\\\hline\Tstrut
T3.\ $\textrm{$x\in f(A\cap B)$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent3. Quantifier-free expansion of hypothesis H2.\nopagebreak[4] 
\marginpar{Since $x\in f(A)\cap f(B)$, $x\in f(A)$ and $x\in f(B)$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ is an injection}$&\\
\textbf{\boldmath H3.\ $\textrm{$x\in f(A)$}$\unboldmath }&\textbf{\boldmath \unboldmath }\\
H4.\ $\textrm{$x\in f(B)$}$&
\Bstrut\\\hline\Tstrut
T3.\ $\textrm{$x\in f(A\cap B)$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent4. Expand pre-existential hypothesis H3.\nopagebreak[4] 
\marginpar{By definition, since $x\in f(A)$, there exists $y\in A$ such that $f(y) = x$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\hspace{1.5mm}$y$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ is an injection}$&\\
H5.\ $\textrm{$y\in A$}$&\\
H6.\ $\textrm{$f(y) = x$}$&\\
\textbf{\boldmath H4.\ $\textrm{$x\in f(B)$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\Bstrut\\\hline\Tstrut
T3.\ $\textrm{$x\in f(A\cap B)$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent5. Expand pre-existential hypothesis H4.\nopagebreak[4] 
\marginpar{By definition, since $x\in f(B)$, there exists $z\in B$ such that $f(z) = x$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\hspace{1.5mm}$y$\hspace{1.5mm}$z$\\

\begin{tabular}{ll}%
\textbf{\boldmath H1.\ $\textrm{$f$ is an injection}$\unboldmath }&\textbf{\boldmath \unboldmath }\\
H5.\ $\textrm{$y\in A$}$&\\
\textbf{\boldmath H6.\ $\textrm{$f(y) = x$}$\unboldmath }&\textbf{\boldmath \unboldmath }\\
H7.\ $\textrm{$z\in B$}$&\\
\textbf{\boldmath H8.\ $\textrm{$f(z) = x$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\Bstrut\\\hline\Tstrut
T3.\ $\textrm{$x\in f(A\cap B)$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent6. Forwards reasoning using H1 with (H6,H8).\nopagebreak[4] 
\marginpar{Since $f$ is an injection, $f(y) = x$ and $f(z) = x$, we have that $y = z$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\hspace{1.5mm}$y$\hspace{1.5mm}$z$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ is an injection}$&[Vuln.; Used with (H6,H8).]\\
H5.\ $\textrm{$y\in A$}$&\\
H6.\ $\textrm{$f(y) = x$}$&[Vuln.]\\
H7.\ $\textrm{$z\in B$}$&\\
H8.\ $\textrm{$f(z) = x$}$&[Vuln.]\\
H9.\ $\textrm{$y = z$}$&
\Bstrut\\\hline\Tstrut
\textbf{\boldmath T3.\ $\textrm{$x\in f(A\cap B)$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent7. Expand pre-existential target T3.\nopagebreak[4] 
\marginpar{We would like to find $u\in A\cap B$ s.t. $f(u) = x$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\hspace{1.5mm}$y$\hspace{1.5mm}$z$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ is an injection}$&[Vuln.; Used with (H6,H8).]\\
H5.\ $\textrm{$y\in A$}$&\\
H6.\ $\textrm{$f(y) = x$}$&[Vuln.]\\
H7.\ $\textrm{$z\in B$}$&\\
H8.\ $\textrm{$f(z) = x$}$&[Vuln.]\\
H9.\ $\textrm{$y = z$}$&
\Bstrut\\\hline\Tstrut
\textbf{\boldmath T4.\ $\exists u.(\textrm{$u\in A\cap B$}\wedge \textrm{$f(u) = x$})$\unboldmath }&\textbf{\boldmath \unboldmath }
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent8. Unlock existential target T4.\nopagebreak[4] 
\marginpar{We would like to find $u\in A\cap B$ s.t. $f(u) = x$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\hspace{1.5mm}$y$\hspace{1.5mm}$z$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ is an injection}$&[Vuln.; Used with (H6,H8).]\\
H5.\ $\textrm{$y\in A$}$&\\
H6.\ $\textrm{$f(y) = x$}$&[Vuln.]\\
H7.\ $\textrm{$z\in B$}$&\\
H8.\ $\textrm{$f(z) = x$}$&[Vuln.]\\
H9.\ $\textrm{$y = z$}$&
\Bstrut\\\hline\Tstrut
\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$u^\blacklozenge $\\

\begin{tabular}{ll}%

\Bstrut\\\hline\Tstrut
\textbf{\boldmath T5.\ $\textrm{$u^\blacklozenge \in A\cap B$}$\unboldmath }&\textbf{\boldmath \unboldmath }\\
T6.\ $\textrm{$f(u^\blacklozenge ) = x$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L2$^\blacklozenge$};
\end{tikzpicture}%

\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent9. Quantifier-free expansion of target T5.\nopagebreak[4] 
\marginpar{But $u\in A\cap B$ if and only if $u\in A$ and $u\in B$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\hspace{1.5mm}$y$\hspace{1.5mm}$z$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ is an injection}$&[Vuln.; Used with (H6,H8).]\\
H5.\ $\textrm{$y\in A$}$&\\
H6.\ $\textrm{$f(y) = x$}$&[Vuln.]\\
H7.\ $\textrm{$z\in B$}$&\\
H8.\ $\textrm{$f(z) = x$}$&[Vuln.]\\
\textbf{\boldmath H9.\ $\textrm{$y = z$}$\unboldmath }&\textbf{\boldmath \unboldmath }
\Bstrut\\\hline\Tstrut
\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$u^\blacklozenge $\\

\begin{tabular}{ll}%

\Bstrut\\\hline\Tstrut
T7.\ $\textrm{$u^\blacklozenge \in A$}$&\\
T8.\ $\textrm{$u^\blacklozenge \in B$}$&\\
T6.\ $\textrm{$f(u^\blacklozenge ) = x$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L2$^\blacklozenge$};
\end{tikzpicture}%

\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent10. Rewrite $z$ as $y$ throughout the tableau using hypothesis H9.\nopagebreak[4] 
\marginpar{Since $y = z$, we have that $y\in B$.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\hspace{1.5mm}$y$\hspace{1.5mm}$z$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ is an injection}$&[Vuln.; Used with (H6,H8).]\\
H5.\ $\textrm{$y\in A$}$&\\
H6.\ $\textrm{$f(y) = x$}$&[Vuln.]\\
H10.\ $\textrm{$y\in B$}$&
\Bstrut\\\hline\Tstrut
\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$u^\blacklozenge $\\

\begin{tabular}{ll}%

\Bstrut\\\hline\Tstrut
T7.\ $\textrm{$u^\blacklozenge \in A$}$&\\
T8.\ $\textrm{$u^\blacklozenge \in B$}$&\\
T6.\ $\textrm{$f(u^\blacklozenge ) = x$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L2$^\blacklozenge$};
\end{tikzpicture}%

\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent11. Moved H6 down, as $x$ can only be utilised by T6.\nopagebreak[4] 
\marginpar{}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\hspace{1.5mm}$y$\hspace{1.5mm}$z$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ is an injection}$&[Vuln.; Used with (H6,H8).]\\
H5.\ $\textrm{$y\in A$}$&\\
H10.\ $\textrm{$y\in B$}$&
\Bstrut\\\hline\Tstrut
\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$u^\blacklozenge $\\

\begin{tabular}{ll}%

\Bstrut\\\hline\Tstrut
T7.\ $\textrm{$u^\blacklozenge \in A$}$&\\
T8.\ $\textrm{$u^\blacklozenge \in B$}$&\\
\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
\\

\begin{tabular}{ll}%
H6.\ $\textrm{$f(y) = x$}$&[Vuln.; From L1.]
\Bstrut\\\hline\Tstrut
T6.\ $\textrm{$f(u^\blacklozenge ) = x$}$&
\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L3};
\end{tikzpicture}%

\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L2$^\blacklozenge$};
\end{tikzpicture}%

\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent12. Choosing $u^\blacklozenge  = y$ matches all targets inside L2$^\blacklozenge$ against hypotheses, so L2$^\blacklozenge$ is done.\nopagebreak[4] 
\marginpar{Therefore, setting $u = y$, we are done.}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}[baseline=(main.base)]%
\node[tableau] (main) {%
$x$\hspace{1.5mm}$y$\hspace{1.5mm}$z$\\

\begin{tabular}{ll}%
H1.\ $\textrm{$f$ is an injection}$&[Vuln.; Used with (H6,H8).]\\
H5.\ $\textrm{$y\in A$}$&\\
H10.\ $\textrm{$y\in B$}$&
\Bstrut\\\hline\Tstrut
\begin{tikzpicture}%
\node[tableau] (main) {%
\ \ \,Done
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L2$^\blacklozenge$};
\end{tikzpicture}%

\end{tabular}%
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}
\smallskip

\noindent13. All targets of L1 are `Done', so L1 is itself done.\nopagebreak[4] 
\marginpar{}\nopagebreak[4] 
\smallskip\nopagebreak[4] 

\begin{fit}\begin{tikzpicture}%
\node[tableau] (main) {%
\ \ \,Done
};%
\node[tableaulabel] at (main.north west) [xshift=4mm, yshift=-5.5mm] {L1};
\end{tikzpicture}%
\end{fit}

Problem solved.
\cleardoublepage

\end{steps}

\end{document}
[ 1 of 19] Compiling Printing         ( Printing.hs, interpreted )
[ 2 of 19] Compiling TexBase          ( TexBase.hs, interpreted )
[ 3 of 19] Compiling Rename           ( Rename.hs, interpreted )
[ 4 of 19] Compiling Types            ( Types.hs, interpreted )
[ 5 of 19] Compiling Tex              ( Tex.hs, interpreted )
[ 6 of 19] Compiling Library          ( Library.hs, interpreted )
[ 7 of 19] Compiling RobotM           ( RobotM.hs, interpreted )
[ 8 of 19] Compiling Writeup          ( Writeup.hs, interpreted )
[ 9 of 19] Compiling Move             ( Move.hs, interpreted )
[10 of 19] Compiling Suspension       ( Suspension.hs, interpreted )
[11 of 19] Compiling Problems         ( Problems.hs, interpreted )
[12 of 19] Compiling Parser           ( Parser.hs, interpreted )
[13 of 19] Compiling Match            ( Match.hs, interpreted )
[14 of 19] Compiling Expansion        ( Expansion.hs, interpreted )
[15 of 19] Compiling RealAnalysis     ( RealAnalysis.hs, interpreted )
[16 of 19] Compiling DeletionMoves    ( DeletionMoves.hs, interpreted )
[17 of 19] Compiling TidyingMoves     ( TidyingMoves.hs, interpreted )
[18 of 19] Compiling ApplyingMoves    ( ApplyingMoves.hs, interpreted )
[19 of 19] Compiling Main             ( Main.hs, interpreted )
Ok, modules loaded: Match, Parser, Main, Types, Rename, Expansion, TexBase, Move, Tex, RobotM, Library, Writeup, Printing, DeletionMoves, TidyingMoves, ApplyingMoves, Suspension, RealAnalysis, Problems.
